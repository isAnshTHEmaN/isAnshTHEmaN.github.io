<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Up - Step 1 & 2</title>
    <link href="https://fonts.googleapis.com/css2?family=Rethink+Sans:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">
</head>
<body>

<div id="login-container" class="login-container d-flex justify-content-center align-items-center">
    <div class="login-board text-center p-4 rounded shadow">
        <div class="logo mb-4">
            <img src="routifysquarelogonew.jpg" alt="Logo" class="img-fluid" />
        </div>
        <h3 class="fw-bold mb-4">Login</h3>
        <form id="login-form">
            <div class="mb-3 input-group">
                <span class="input-group-text">
                    <i class="fas fa-user"></i>
                </span>
                <input type="text" class="form-control" placeholder="Email" required>
            </div>
            <div class="mb-4 input-group">
                <span class="input-group-text">
                    <i class="fas fa-lock"></i>
                </span>
                <input type="password" class="form-control" placeholder="Password" required>
            </div>
            <button type="submit" class="btn btn-dark btn-block w-100">Login</button>
        </form>
        <div class="mt-4">
            <p class="signup-text">Don't have an account? <a href="#" id="show-signup">Sign Up</a></p>
        </div>
    </div>
</div>

<div id="signup-container-step1" class="login-container d-none justify-content-center align-items-center">
    <div id="signup-step1" class="login-board text-center p-4 rounded shadow">
        <h3 class="fw-bold mb-4">Sign Up</h3>
        <form id="signup-form-step1">
            <div class="mb-4 text-center">
                <label for="district-code" class="form-label">Enter the 6-digit district code provided by your school.</label>
                <input type="text" id="district-code" class="form-control text-uppercase" maxlength="6" required>
            </div>
            <div class="text-center mb-4">
                <a href="https://voltschool.vercel.app" class="text-decoration-none" target="_blank">Can't find your code?</a>
            </div>
            <button type="button" id="next-step" class="btn btn-dark btn-block w-100" disabled>Next</button>
        </form>
        <div class="mt-4">
            <p class="signup-text">
                <a href="#" id="go-back-login" class="text-decoration-none">Back to Login <span class="arrow">&larr;</span></a>
            </p>
        </div>
    </div>
</div>

<div id="signup-container-step2" class="login-container d-none justify-content-center align-items-center">
    <div id="signup-step2" class="login-board text-center p-4 rounded shadow">
        <div class="logo mb-4">
            <img src="brlogo.jpg" alt="Logo" class="rounded-circle" width="100">
        </div>
        <h3 class="fw-bold mb-4">Bridgewater-Raritan School District</h3>
        <h5 class="mb-4">Welcome!</h5>
        <div class="d-flex justify-content-center mb-4">
            <button type="button" class="btn btn-primary mx-2 w-50" id="parent-button">Parent</button>
            <button type="button" class="btn btn-secondary mx-2 w-50" id="student-button">Student</button>
        </div>
    </div>
</div>

<div id="signup-container-parent" class="login-container d-none justify-content-center align-items-center">
    <div id="signup-parent-details" class="login-board text-center p-4 rounded shadow">
        <h3 class="fw-bold mb-4">Parent Registration</h3>
        <form id="parent-form">
            <div class="mb-3 text-start">
                <label for="parent-code-reg" class="form-label">Parent Code (6 digits)</label>
                <input type="text" id="parent-code-reg" class="form-control text-uppercase" maxlength="6" required>
                <div class="error-message" id="parent-code-reg-error"></div>
            </div>
            <div class="mb-3 text-start">
                <label for="first-name" class="form-label">First Name</label>
                <input type="text" id="first-name" class="form-control">
                <div class="error-message" id="first-name-error"></div>
            </div>
            <div class="mb-3 text-start">
                <label for="last-name" class="form-label">Last Name</label>
                <input type="text" id="last-name" class="form-control">
                <div class="error-message" id="last-name-error"></div>
            </div>
            <div class="mb-3 text-start">
                <label for="username" class="form-label">Username</label>
                <input type="text" id="username" class="form-control">
                <div class="error-message" id="username-error"></div>
            </div>
            <div class="mb-3 text-start">
                <label for="password" class="form-label">Password</label>
                <input type="password" id="password" class="form-control">
                <div class="error-message" id="password-error"></div>
            </div>
            <div class="mb-3 text-start">
                <label for="confirm-password" class="form-label">Confirm Password</label>
                <input type="password" id="confirm-password" class="form-control">
                <div class="error-message" id="confirm-password-error"></div>
            </div>
            <div class="mb-3 text-start">
                <label for="email" class="form-label">Email</label>
                <input type="email" id="email" class="form-control">
                <div class="error-message" id="email-error"></div>
            </div>
            <div class="mb-3 text-start">
                <label for="phone" class="form-label">Phone Number</label>
                <input type="tel" id="phone" class="form-control">
                <div class="error-message" id="phone-error"></div>
            </div>
            <button type="button" id="complete-registration" class="btn btn-dark btn-block w-100">
                Complete Registration
            </button>
        </form>
        <div id="registration-errors"></div>
        <div class="mt-4">
            <p class="signup-text">
                <a href="#" id="go-back-step2" class="text-decoration-none">Back <span class="arrow">&larr;</span></a>
            </p>
        </div>
    </div>
</div>

<div id="verification-container" class="login-container d-none justify-content-center align-items-center">
    <div class="login-board text-center p-4 rounded shadow">
        <h3 class="fw-bold mb-4">Verifying with Voltschool</h3>
        <div class="spinner-border text-warning mb-4" style="width: 3rem; height: 3rem;" role="status">
            <span class="visually-hidden">Loading...</span>
        </div>
        <div id="verification-complete" class="d-none">
            <div class="alert alert-success mb-4" role="alert">
                Verification successful!
            </div>
            <button type="button" id="continue-to-dashboard" class="btn btn-dark btn-block w-100">Continue</button>
        </div>
    </div>
</div>

<div id="signup-container-student" class="login-container d-none justify-content-center align-items-center">
    <div id="signup-student-code" class="login-board text-center p-4 rounded shadow">
        <h3 class="fw-bold mb-4">Student Registration</h3>
        <form id="student-form">
            <div class="mb-4 text-start">
                <label for="parent-code" class="form-label">Enter the 6-digit parent code.</label>
                <input type="text" id="parent-code" class="form-control text-uppercase" maxlength="6" required>
                <div class="error-message" id="parent-code-error"></div>
            </div>
            <div class="text-center mb-4">
                <a href="https://thernel.me" class="text-decoration-none" target="_blank">Can't find the code?</a>
            </div>
            <button type="button" id="next-step-student" class="btn btn-dark btn-block w-100">Next</button>
        </form>
        <div class="mt-4">
            <p class="signup-text">
                <a href="#" id="go-back-step2-student" class="text-decoration-none">Back <span class="arrow">&larr;</span></a>
            </p>
        </div>
    </div>
</div>

<div id="welcome-screen" class="login-container d-none justify-content-center align-items-center">
    <div class="login-board text-center p-4 rounded shadow">
        <h3 class="fw-bold mb-4">Welcome!</h3>
        <p class="mb-4">Logged in as: Example Parent <a href="#" id="not-you" class="text-primary">Not you?</a></p>
        <button type="button" id="add-child" class="btn btn-success mb-4">Add Child</button>
    </div>
</div>

<div id="add-child-screen" class="login-container d-none justify-content-center align-items-center">
    <div class="login-board text-center p-4 rounded shadow">
        <h3 class="fw-bold mb-4">Add Child</h3>
        <form id="add-child-form">
            <div class="mb-4 text-start">
                <label for="child-code" class="form-label">Enter the 6-character Child Code.</label>
                <input type="text" id="child-code" class="form-control text-uppercase" maxlength="6" required>
                <div class="error-message" id="child-code-error"></div>
            </div>
            <button type="button" id="submit-child-code" class="btn btn-dark btn-block w-100">Submit</button>
        </form>
        <div id="child-profile" class="d-none mt-4">
            <div class="d-flex align-items-center">
                <img src="tharun.png" alt="Child Profile Picture" class="rounded-circle" width="50">
                <span id="child-name" class="ms-3 fw-bold">Tharun N.</span>
            </div>
            <button type="button" id="continue-button" class="btn btn-primary mt-4 w-100">Continue</button>
        </div>
    </div>
</div>

<script>
    if (!navigator.serviceWorker.controller) {
        navigator.serviceWorker.register("/sw.js").then(function(reg) {
            console.log("Service worker has been registered for scope: " + reg.scope);
        });
    }
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="script.js"></script>
</body>
</html>